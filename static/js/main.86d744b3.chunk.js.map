{"version":3,"sources":["images/after.png","images/before.png","components/TripsDemo/Container.js","components/TripsDemo/TripsDemo.js","components/TripsDemo/index.js","presentation.js","index.js"],"names":["module","exports","__webpack_require__","p","styled","div","_templateObject","DATA_URL","LIGHT_SETTINGS","lightsPosition","ambientRatio","diffuseRatio","specularRatio","lightsStrength","numberOfLights","INITIAL_VIEW_STATE","longitude","latitude","zoom","maxZoom","pitch","bearing","TripsDemo","_Component","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","back","time","viewState","inherits","createClass","key","value","_animate","_animationFrame","window","cancelAnimationFrame","_this$props","_this$props$loopLengt","loopLength","_this$props$animation","animationSpeed","loopTime","newTime","Date","now","setState","_ref","objectSpread","requestAnimationFrame","bind","TripsLayer","id","data","getPath","d","segments","getColor","vendor","opacity","strokeWidth","trailLength","currentTime","PolygonLayer","extruded","wireframe","fp64","getPolygon","f","polygon","getElevation","height","getFillColor","lightSettings","_this$props2","_this$props2$controll","controller","_this$props2$baseMap","baseMap","react_default","a","createElement","Container","dist_esm","layers","_renderLayers","initialViewState","esm","reuseMaps","mapStyle","preventStyleDiffing","mapboxApiAccessToken","Component","require","theme","createTheme","primary","secondary","tertiary","quaternary","transparent","white","Presentation","deck","transitionDuration","slide","transition","bgColor","components_TripsDemo","heading","size","textColor","appear","fid","components_image","src","after","before","ReactDOM","render","react_hot_loader","errorReporter","error","lib_default","presentation_Presentation","document","getElementById"],"mappings":"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","file":"static/js/main.86d744b3.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/after.1f6fe29f.png\";","module.exports = __webpack_public_path__ + \"static/media/before.70d501b5.png\";","import styled from 'styled-components';\n\nexport default styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  z-index: -1;\n  \n  .mapboxgl-map {\n    text-align: left;\n  }\n`;\n","/* global window */\nimport React, {Component} from 'react';\nimport { StaticMap } from 'react-map-gl';\nimport DeckGL, { PolygonLayer } from 'deck.gl';\nimport { TripsLayer } from '@deck.gl/experimental-layers';\n\nimport Container from './Container';\n\n// Source data CSV\nconst DATA_URL = {\n  BUILDINGS:\n    'https://raw.githubusercontent.com/uber-common/deck.gl-data/master/examples/trips/buildings.json', // eslint-disable-line\n  TRIPS:\n    'https://raw.githubusercontent.com/uber-common/deck.gl-data/master/examples/trips/trips.json' // eslint-disable-line\n};\n\nconst LIGHT_SETTINGS = {\n  lightsPosition: [-74.05, 40.7, 8000, -73.5, 41, 5000],\n  ambientRatio: 0.05,\n  diffuseRatio: 0.6,\n  specularRatio: 0.8,\n  lightsStrength: [2.0, 0.0, 0.0, 0.0],\n  numberOfLights: 2\n};\n\nexport const INITIAL_VIEW_STATE = {\n  longitude: -74,\n  latitude: 40.710,\n  zoom: 14,\n  maxZoom: 16,\n  pitch: 45,\n  bearing: 0\n};\n\nexport class TripsDemo extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      back: false,\n      time: 0,\n      viewState: {\n        longitude: -74,\n        latitude: 40.710,\n        zoom: 14,\n        maxZoom: 16,\n        pitch: 45,\n        bearing: 0\n      }\n    };\n  }\n\n  componentDidMount() {\n    this._animate();\n  }\n\n  componentWillUnmount() {\n    if (this._animationFrame) {\n      window.cancelAnimationFrame(this._animationFrame);\n    }\n  }\n\n  _animate() {\n    const {\n      loopLength = 1800, // unit corresponds to the timestamp in source data\n      animationSpeed = 30 // unit time per second\n    } = this.props;\n\n    const timestamp = Date.now() / 1000;\n    const loopTime = loopLength / animationSpeed;\n    const newTime = ((timestamp % loopTime) / loopTime) * loopLength;\n\n    this.setState(({ viewState }) => ({\n      time: newTime,\n      viewState: {\n        ...viewState,\n        bearing: (360 / 18000) * newTime\n      }\n    }));\n    this._animationFrame = window.requestAnimationFrame(this._animate.bind(this));\n  }\n\n  _renderLayers() {\n    return [\n      new TripsLayer({\n        id: 'trips',\n        data: DATA_URL.TRIPS,\n        getPath: d => d.segments,\n        getColor: d => (d.vendor === 0 ? [253, 128, 93] : [23, 184, 190]),\n        opacity: 0.3,\n        strokeWidth: 1,\n        trailLength: 120,\n        currentTime: this.state.time\n      }),\n      new PolygonLayer({\n        id: 'buildings',\n        data: DATA_URL.BUILDINGS,\n        extruded: true,\n        wireframe: false,\n        fp64: true,\n        opacity: 0.3,\n        getPolygon: f => f.polygon,\n        getElevation: f => f.height,\n        getFillColor: [74, 80, 110],\n        lightSettings: LIGHT_SETTINGS\n      })\n    ];\n  }\n\n  render() {\n    const { controller = true, baseMap = true } = this.props;\n    const { viewState } = this.state;\n\n    return (\n      <Container>\n        <DeckGL\n          layers={this._renderLayers()}\n          initialViewState={INITIAL_VIEW_STATE}\n          viewState={viewState}\n          controller={controller}\n        >\n          {baseMap && (\n            <StaticMap\n              reuseMaps\n              mapStyle='mapbox://styles/martinproject1/cjnfxj6053wz32rq8r9sija4o'\n              preventStyleDiffing={true}\n              mapboxApiAccessToken={'pk.eyJ1IjoibWFydGlucHJvamVjdDEiLCJhIjoiY2ptdW93MXZrMDNjMTNrcGhmNTJ1ZGljdCJ9.9fC5LXUepNAYTKu8O162OA'}\n            />\n          )}\n        </DeckGL>\n      </Container>\n    );\n  }\n}\n\nexport default TripsDemo;\n","import TripsDemo from './TripsDemo';\n\nexport default TripsDemo;\n","// Import React\nimport React, { Component } from 'react';\n\n// Import Spectacle Core tags\nimport {\n  Deck,\n  Heading,\n  Slide,\n  Appear,\n  Image\n} from 'spectacle';\n\nimport TripsDemo from './components/TripsDemo';\n\n// Import theme\nimport createTheme from 'spectacle/lib/themes/default';\n\nimport after from './images/after.png';\nimport before from './images/before.png';\n\n// Require CSS\nrequire('normalize.css');\n\nconst theme = createTheme(\n  {\n    primary: '#253041',\n    secondary: '#CECECE',\n    tertiary: '#03A9FC',\n    quaternary: '#CECECE',\n    transparent: 'transparent',\n    white: 'white'\n  },\n  {\n    primary: 'Montserrat',\n    secondary: 'Helvetica',\n  }\n);\n\nexport default class Presentation extends Component {\n  render() {\n    return (\n      <Deck\n        transitionDuration={500}\n        theme={theme}\n      >\n        {/* Slide 1 */}\n        <Slide transition={['fade']} bgColor=\"transparent\">\n          <TripsDemo />\n          <Heading size={2} textColor=\"secondary\">\n            deck.gl\n            <br />\n            И как его готовить\n          </Heading>\n        </Slide>\n        {/* Slide 2 */}\n        <Slide transition={['fade']} bgColor=\"primary\">\n          <Heading size={4} textColor=\"secondary\">\n            Как это работает\n          </Heading>\n        </Slide>\n        {/* Slide 3 */}\n        <Slide transition={['fade']} bgColor=\"primary\">\n            <Heading size={4} textColor=\"secondary\">\n              deck.gl\n            </Heading>\n            <Appear fid=\"1\">\n              <Heading size={4} textColor=\"secondary\">\n                &#8595;\n                <br/>\n                luma.gl\n              </Heading>\n            </Appear>\n            <Appear fid=\"2\">\n              <Heading size={4} textColor=\"secondary\">\n                &#8595;\n                <br/>\n                WebGL\n              </Heading>\n            </Appear>\n        </Slide>\n        {/* Slide 4 */}\n        <Slide transition={['fade']} bgColor=\"primary\">\n          <Heading size={4} textColor=\"secondary\">\n            deck.gl + mapbox-gl-js\n          </Heading>\n        </Slide>\n        {/* Slide 5 */}\n        <Slide transition={['fade']} bgColor=\"white\">\n          <Heading size={6} textColor=\"primary\">\n            {'mapbox-gl-js'}\n            <br />\n            <br />\n            {'< 0.50.0'}\n          </Heading>\n          <Image src={after} />\n        </Slide>\n        {/* Slide 6 */}\n        <Slide transition={['fade']} bgColor=\"white\">\n          <Heading size={6} textColor=\"primary\">\n            {'mapbox-gl-js'}\n            <br />\n            <br />\n            {'0.50.0'}\n          </Heading>\n          <Image src={before} />\n        </Slide>\n      </Deck>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport { AppContainer } from 'react-hot-loader';\nimport Redbox from 'redbox-react';\n\nimport Presentation from './presentation';\n\nconst CustomErrorReporter = ({ error }) => <Redbox error={error} />;\n\nCustomErrorReporter.propTypes = {\n  error: PropTypes.instanceOf(Error).isRequired,\n};\n\nReactDOM.render(\n  <AppContainer errorReporter={CustomErrorReporter}>\n    <Presentation />\n  </AppContainer>,\n  document.getElementById('root')\n);\n\nif (module.hot) {\n  module.hot.accept('./presentation', () => {\n    const NextPresentation = require('./presentation').default;\n    ReactDOM.render(\n      <AppContainer errorReporter={CustomErrorReporter}>\n        <NextPresentation />\n      </AppContainer>,\n      document.getElementById('root')\n    );\n  });\n}\n"],"sourceRoot":""}